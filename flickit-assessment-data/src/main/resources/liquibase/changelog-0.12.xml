<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.17.xsd">

    <changeSet id="0.12-01" author="MKouhestani">
        <addColumn tableName="fac_evidence">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-02" author="MKouhestani">
        <update tableName="fac_evidence">
            <column name="created_by_id" valueComputed="fac_assessment.created_by FROM fac_assessment WHERE
            fac_assessment.id = assessment_id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-03" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fac_evidence"
                                 baseColumnNames="created_by_id"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fac_evidence_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-04" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fac_evidence"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fac_evidence_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-05" author="MKouhestani">
        <update tableName="fac_evidence">
            <column name="last_modified_by" valueComputed="fac_assessment.created_by FROM fac_assessment WHERE
            fac_assessment.id = assessment_id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-06" author="MKouhestani">
        <addNotNullConstraint columnName="last_modified_by"
                              constraintName="last_modified_by_not_null"
                              tableName="fac_evidence"/>
    </changeSet>

    <changeSet id="0.12-07" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_assessmentkit" newTableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-08" author="Ali Sedaghat">
        <renameColumn tableName="fak_assessment_kit" oldColumnName="is_active" newColumnName="published"/>
    </changeSet>

    <changeSet id="0.12-09" author="Ali Sedaghat">
        <sql>alter table fak_assessment_kit rename constraint baseinfo_assessmentprofile_pkey to pk_fak_assessment_kit;</sql>
    </changeSet>

    <changeSet id="0.12-10" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-11" author="Ali Sedaghat">
        <dropUniqueConstraint constraintName="baseinfo_assessmentprofile_code_5a9ff625_uniq" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-12" author="Ali Sedaghat">
        <dropUniqueConstraint constraintName="baseinfo_assessmentprofile_title_0279319f_uniq" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-13" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="expert_group_id"
                                 referencedTableName="baseinfo_expertgroup"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_expertgroup"/>
    </changeSet>

    <changeSet id="0.12-14" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_assessment_kit" columnNames="code" constraintName="uq_fak_assessmentkit_code"/>
    </changeSet>

    <changeSet id="0.12-15" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_assessment_kit" columnNames="title" constraintName="uq_fak_assessmentkit_title"/>
    </changeSet>

    <changeSet id="0.12-16" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_assessmentkit_id_seq" newSequenceName="fak_assessment_kit_id_seq"/>
    </changeSet>

    <changeSet id="0.12-17" author="Ali Sedaghat">
        <addColumn tableName="fak_assessment_kit">
            <column name="created_by" type="uuid"/>
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-18" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-19" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-20" author="Ali Sedaghat">
        <update tableName="fak_assessment_kit">
            <column name="created_by"
                    valueComputed="baseinfo_expertgroup.owner_id FROM baseinfo_expertgroup
                     WHERE fak_assessment_kit.expert_group_id = baseinfo_expertgroup.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-21" author="Ali Sedaghat">
        <update tableName="fak_assessment_kit">
            <column name="last_modified_by"
                    valueComputed="baseinfo_expertgroup.owner_id FROM baseinfo_expertgroup
                     WHERE fak_assessment_kit.expert_group_id = baseinfo_expertgroup.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-22" author="Ali Sedaghat">
        <addNotNullConstraint columnName="created_by" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-23" author="Ali Sedaghat">
        <addNotNullConstraint columnName="last_modified_by" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-24" author="Ali Sedaghat">
        <renameColumn tableName="fac_evidence" oldColumnName="created_by_id" newColumnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-25" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_assessmentsubject" newTableName="fak_subject"/>
    </changeSet>

    <changeSet id="0.12-26" author="Ali Sedaghat">
        <sql>alter table fak_subject rename constraint baseinfo_assessmentsubject_pkey to pk_fak_subject;</sql>
    </changeSet>

    <changeSet id="0.12-27" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_subject"/>
    </changeSet>

    <changeSet id="0.12-28" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_subject"
                              constraintName="baseinfo_assessmentsubje_index_assessment_profile_bd210cc8_uniq"/>
    </changeSet>

    <changeSet id="0.12-29" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_subject"
                              constraintName="baseinfo_assessmentsubje_title_assessment_profile_b703b977_uniq"/>
    </changeSet>

    <changeSet id="0.12-30" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_subject"
                              constraintName="baseinfo_assessmentsubject_code_a19bcda2_uniq"/>
    </changeSet>

    <changeSet id="0.12-31" author="Ali Sedaghat">
        <sql>alter table fak_subject drop constraint if exists baseinfo_assessmentsubject_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-32" author="Ali Sedaghat">
        <renameColumn tableName="fak_subject" oldColumnName="assessment_kit_id" newColumnName="kit_id"/>
    </changeSet>

    <changeSet id="0.12-33" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject"
                                 baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subject_assessmentkit"
                                 deferrable="true"
                                 initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-34" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_subject"
                             columnNames="index,kit_id"
                             constraintName="uq_fak_subject_index_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-35" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_subject"
                             columnNames="title,kit_id"
                             constraintName="uq_fak_subject_title_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-36" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_subject"
                             columnNames="code,kit_id"
                             constraintName="uq_fak_subject_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-37" author="Ali Sedaghat">
        <addColumn tableName="fak_subject">
            <column name="weight" defaultValue="1" type="int">
                <constraints nullable="false" />
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-38" author="Ali Sedaghat">
        <addColumn tableName="fak_subject">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-39" author="Ali Sedaghat">
        <addColumn tableName="fak_subject">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-40" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subject_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-41" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subject_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-42" author="Ali Sedaghat">
        <update tableName="fak_subject">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
             WHERE fak_subject.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-43" author="Ali Sedaghat">
        <update tableName="fak_subject">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_subject.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-44" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_subject" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-45" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_subject" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-46" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_assessmentsubject_id_seq" newSequenceName="fak_subject_id_seq"/>
    </changeSet>

    <changeSet id="0.12-47" author="Ali Sedagaht">
        <renameTable oldTableName="baseinfo_qualityattribute" newTableName="fak_attribute"/>
    </changeSet>

    <changeSet id="0.12-48" author="Ali Sedaghat">
        <sql>alter table fak_attribute rename constraint baseinfo_qualityattribute_pkey to pk_fak_attribute;</sql>
    </changeSet>

    <changeSet id="0.12-49" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_attribute"/>
    </changeSet>

    <changeSet id="0.12-50" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_attribute" constraintName="baseinfo_qualityattribute_code_fc2b6cd0_uniq"/>
    </changeSet>

    <changeSet id="0.12-51" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_attribute" constraintName="uq_baseinfo_qualityattribute_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-52" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_attribute"
                              constraintName="uq_baseinfo_qualityattribute_index_assessment_subject_id"/>
    </changeSet>

    <changeSet id="0.12-53" author="Ali Sedaghat">
        <sql>alter table fak_attribute drop constraint if exists baseinfo_qualityattribute_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-54" author="Ali Sedaghat">
        <sql>alter table fak_attribute drop constraint if exists baseinfo_qualityattribute_weight_check;</sql>
    </changeSet>

    <changeSet id="0.12-55" author="Ali Sedaghat">
        <renameColumn tableName="fak_attribute" oldColumnName="assessment_subject_id" newColumnName="subject_id"/>
    </changeSet>

    <changeSet id="0.12-56" author="Ali Sedaghat">
        <renameColumn tableName="fak_attribute" oldColumnName="assessment_kit_id" newColumnName="kit_id"/>
    </changeSet>

    <changeSet id="0.12-57" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="subject_id"
                                 referencedTableName="fak_subject"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_subject"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-58" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_assessmentkit"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-59" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_attribute" columnNames="code,subject_id"
                             constraintName="uq_fak_attribute_code_subjectid"/>
    </changeSet>

    <changeSet id="0.12-60" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_attribute" columnNames="code,kit_id"
                             constraintName="uq_fak_attribute_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-61" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_attribute" columnNames="index,subject_id"
                             constraintName="uq_fak_attribute_index_subjectid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-62" author="Ali Sedaghat">
        <addColumn tableName="fak_attribute">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-63" author="Ali Sedaghat">
        <addColumn tableName="fak_attribute">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-64" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-65" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-66" author="Ali Sedaghat">
        <update tableName="fak_attribute">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
             WHERE fak_attribute.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-67" author="Ali Sedaghat">
        <update tableName="fak_attribute">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_attribute.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-68" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_attribute" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-69" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_attribute" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-70" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_qualityattribute_id_seq" newSequenceName="fak_attribute_id_seq"/>
    </changeSet>

    <changeSet id="0.12-71" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_questionnaire" newTableName="fak_questionnaire"/>
    </changeSet>

    <changeSet id="0.12-72" author="Ali Sedaghat">
        <sql>alter table fak_questionnaire rename constraint baseinfo_questionnaire_pkey to pk_fak_questionnaire;</sql>
    </changeSet>

    <changeSet id="0.12-73" author="Ali Sedaghat">
        <sql>alter table fak_questionnaire drop constraint if exists baseinfo_questionnaire_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-74" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_questionnaire"/>
    </changeSet>

    <changeSet id="0.12-75" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_questionnaire" constraintName="baseinfo_questionnaire_code_04aa0ba7_uniq"/>
    </changeSet>

    <changeSet id="0.12-76" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_questionnaire"
                              constraintName="baseinfo_questionnaire_index_assessment_profile_18f9d6f7_uniq"/>
    </changeSet>

    <changeSet id="0.12-77" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_questionnaire"
                              constraintName="baseinfo_questionnaire_title_assessment_profile_24316390_uniq"/>
    </changeSet>

    <changeSet id="0.12-78" author="Ali Sedaghat">
        <renameColumn tableName="fak_questionnaire" oldColumnName="assessment_kit_id" newColumnName="kit_id"/>
    </changeSet>

    <changeSet id="0.12-79" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_questionnaire" baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionnaire_assessmentkit"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-80" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_questionnaire" columnNames="code,kit_id"
                             constraintName="uq_fak_questionnaire_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-81" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_questionnaire" columnNames="index,kit_id"
                             constraintName="uq_fak_questionnaire_index_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-82" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_questionnaire" columnNames="title,kit_id"
                             constraintName="uq_fak_questionnaire_title_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-83" author="Ali Sedaghat">
        <addColumn tableName="fak_questionnaire">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-84" author="Ali Sedaghat">
        <addColumn tableName="fak_questionnaire">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-85" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_questionnaire"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionnaire_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-86" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_questionnaire"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionnaire_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-87" author="Ali Sedaghat">
        <update tableName="fak_questionnaire">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
             WHERE fak_questionnaire.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-88" author="Ali Sedaghat">
        <update tableName="fak_questionnaire">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_questionnaire.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-89" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_questionnaire" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-90" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_questionnaire" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-91" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_questionnaire_id_seq" newSequenceName="fak_questionnaire_id_seq"/>
    </changeSet>

    <changeSet id="0.12-92" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_answertemplate" newTableName="fak_answer_option"/>
    </changeSet>

    <changeSet id="0.12-93" author="Ali Sedaghat">
        <sql>alter table fak_answer_option rename constraint baseinfo_answertemplate_pkey to pk_fak_answer_option;</sql>
    </changeSet>

    <changeSet id="0.12-94" author="Ali Sedaghat">
        <sql>alter table fak_answer_option drop constraint if exists baseinfo_answertemplate_value_check;</sql>
    </changeSet>

    <changeSet id="0.12-95" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_answer_option"/>
    </changeSet>

    <changeSet id="0.12-96" author="Ali Sedaghat">
        <sql>alter table fak_answer_option drop constraint if exists baseinfo_answertemplate_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-97" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_answer_option"
                              constraintName="baseinfo_answertemplate_index_metric_id_9f834dee_uniq"/>
    </changeSet>

    <changeSet id="0.12-98" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option" baseColumnNames="question_id"
                                 referencedTableName="baseinfo_question"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroption_question"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-99" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_answer_option" columnNames="index,question_id"
                             constraintName="uq_fak_answeroption_index_questionid"/>
    </changeSet>

    <changeSet id="0.12-100" author="Ali Sedaghat">
        <dropColumn tableName="fak_answer_option">
            <column name="value"/>
        </dropColumn>
    </changeSet>

    <changeSet id="0.12-101" author="Ali Sedaghat">
        <renameColumn tableName="fak_answer_option" oldColumnName="caption" newColumnName="title"/>
    </changeSet>

    <changeSet id="0.12-102" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="creation_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-103" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-104" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="creation_time" valueComputed="baseinfo_question.creation_time FROM baseinfo_question
             WHERE fak_answer_option.question_id = baseinfo_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-105" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="last_modification_time" valueComputed="baseinfo_question.last_modification_date FROM baseinfo_question
             WHERE fak_answer_option.question_id = baseinfo_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-106" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="creation_time"/>
    </changeSet>

    <changeSet id="0.12-107" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-108" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-109" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-110" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroption_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-111" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroption_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-112" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="created_by" valueComputed="fak_questionnaire.created_by FROM fak_questionnaire
            WHERE fak_questionnaire.id = (SELECT baseinfo_question.questionnaire_id FROM baseinfo_question
            WHERE fak_answer_option.question_id = baseinfo_question.id)"/>
        </update>
    </changeSet>

    <changeSet id="0.12-113" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="last_modified_by" valueComputed="fak_questionnaire.last_modified_by FROM fak_questionnaire
            WHERE fak_questionnaire.id = (SELECT baseinfo_question.questionnaire_id FROM baseinfo_question
            WHERE fak_answer_option.question_id = baseinfo_question.id)"/>
        </update>
    </changeSet>

    <changeSet id="0.12-114" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-115" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-116" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_answertemplate_id_seq" newSequenceName="fak_answer_option_id_seq"/>
    </changeSet>

    <changeSet id="0.12-117" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_optionvalue" newTableName="fak_answer_option_impact"/>
    </changeSet>

    <changeSet id="0.12-118" author="Ali Sedaghat">
        <sql>alter table fak_answer_option_impact rename constraint baseinfo_optionvalue_pkey to pk_fak_answer_option_impact;</sql>
    </changeSet>

    <changeSet id="0.12-119" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_answer_option_impact"/>
    </changeSet>

    <changeSet id="0.12-120" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="question_impact_id"
                                 referencedTableName="baseinfo_questionimpact"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroptionimpact_questionimpact"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-121" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="option_id"
                                 referencedTableName="fak_answer_option"
                                 referencedColumnNames="id"
                                 constraintName="fak_answeroptionimpact_answeroption"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-122" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="creation_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-123" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-124" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="creation_time" valueComputed="fak_answer_option.creation_time FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-125" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="last_modification_time" valueComputed="fak_answer_option.last_modification_time FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-126" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="creation_time"/>
    </changeSet>

    <changeSet id="0.12-127" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-128" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-129" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-130" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroptionimpact_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-131" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroptionimpact_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-132" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="created_by" valueComputed="fak_answer_option.created_by FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-133" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="last_modified_by" valueComputed="fak_answer_option.last_modified_by FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-134" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-135" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-136" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_optionvalue_id_seq" newSequenceName="fak_answer_option_impact_id_seq"/>
    </changeSet>

    <changeSet id="0.12-137" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_question" newTableName="fak_question"/>
    </changeSet>

    <changeSet id="0.12-138" author="Ali Sedaghat">
        <sql>alter table fak_question rename constraint baseinfo_metric_pkey to pk_fak_question;</sql>
    </changeSet>

    <changeSet id="0.12-139" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_question"/>
    </changeSet>

    <changeSet id="0.12-140" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_question" constraintName="uq_baseinfo_question_code_questionnaire_id"/>
    </changeSet>

    <changeSet id="0.12-141" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question"
                                 baseColumnNames="questionnaire_id"
                                 referencedTableName="fak_questionnaire"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_question_questionnaire"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-142" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_question" columnNames="code,questionnaire_id"
                             constraintName="uq_fak_question_code_questionnaireid"/>
    </changeSet>

    <changeSet id="0.12-143" author="Ali Sedaghat">
        <renameColumn tableName="fak_question" oldColumnName="description" newColumnName="hint"/>
    </changeSet>

    <changeSet id="0.12-144" author="Ali Sedaghat">
        <renameColumn tableName="fak_question" oldColumnName="last_modification_date" newColumnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-145" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_question" columnName="index"/>
    </changeSet>

    <changeSet id="0.12-146" author="Ali Sedaghat">
        <addColumn tableName="fak_question">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-147" author="Ali Sedaghat">
        <addColumn tableName="fak_question">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-148" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_question_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-149" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_question_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-150" author="Ali Sedaghat">
        <update tableName="fak_question">
            <column name="created_by" valueComputed="fak_questionnaire.created_by FROM fak_questionnaire
             WHERE fak_question.questionnaire_id = fak_questionnaire.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-151" author="Ali Sedaghat">
        <update tableName="fak_question">
            <column name="last_modified_by" valueComputed="fak_questionnaire.last_modified_by FROM fak_questionnaire
             WHERE fak_question.questionnaire_id = fak_questionnaire.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-152" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_question" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-153" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_question" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-154" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_question_id_seq" newSequenceName="fak_question_id_seq"/>
    </changeSet>

    <changeSet id="0.12-155" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_questionimpact" newTableName="fak_question_impact"/>
    </changeSet>

    <changeSet id="0.12-156" author="Ali Sedaghat">
        <sql>alter table fak_question_impact rename constraint baseinfo_metricimpact_pkey to pk_fak_question_impact;</sql>
    </changeSet>

    <changeSet id="0.12-157" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_question_impact"/>
    </changeSet>

    <changeSet id="0.12-158" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question_impact"
                                 baseColumnNames="question_id"
                                 referencedTableName="fak_question"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionimpact_question"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-159" author="Ali Sedaghat">
        <renameColumn tableName="fak_question_impact"
                      oldColumnName="quality_attribute_id" newColumnName="attribute_id"/>
    </changeSet>

    <changeSet id="0.12-160" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question_impact"
                                 baseColumnNames="attribute_id"
                                 referencedTableName="fak_attribute"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionimpact_attribute"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-161" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question_impact"
                                 baseColumnNames="maturity_level_id"
                                 referencedTableName="baseinfo_maturitylevel"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionimpact_maturitylevel"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-162" author="Ali Sedaghat">
        <dropColumn tableName="fak_question_impact">
            <column name="level"/>
        </dropColumn>
    </changeSet>

    <changeSet id="0.12-163" author="Ali Sedaghat">
        <sql>alter table fak_question_impact drop constraint if exists baseinfo_metricimpact_weight_check;</sql>
    </changeSet>

    <changeSet id="0.12-164" author="Ali Sedaghat">
        <addColumn tableName="fak_question_impact">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-165" author="Ali Sedaghat">
        <addColumn tableName="fak_question_impact">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-166" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question_impact"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionimpact_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-167" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_question_impact"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionimpact_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-168" author="Ali Sedaghat">
        <update tableName="fak_question_impact">
            <column name="created_by" valueComputed="fak_question.created_by FROM fak_question
             WHERE fak_question_impact.question_id = fak_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-169" author="Ali Sedaghat">
        <update tableName="fak_question_impact">
            <column name="last_modified_by" valueComputed="fak_question.last_modified_by FROM fak_question
             WHERE fak_question_impact.question_id = fak_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-170" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_question_impact" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-171" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_question_impact" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-172" author="Ali Sedaghat">
        <addColumn tableName="fak_question_impact">
            <column name="creation_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-173" author="Ali Sedaghat">
        <addColumn tableName="fak_question_impact">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-174" author="Ali Sedaghat">
        <update tableName="fak_question_impact">
            <column name="creation_time" valueComputed="fak_question.creation_time FROM fak_question
             WHERE fak_question_impact.question_id = fak_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-175" author="Ali Sedaghat">
        <update tableName="fak_question_impact">
            <column name="last_modification_time" valueComputed="fak_question.last_modification_time FROM fak_question
             WHERE fak_question_impact.question_id = fak_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-176" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_question_impact" columnName="creation_time"/>
    </changeSet>

    <changeSet id="0.12-177" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_question_impact" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-178" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_questionimpact_id_seq" newSequenceName="fak_question_impact_id_seq"/>
    </changeSet>

    <changeSet id="0.12-179" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_maturitylevel" newTableName="fak_maturity_level"/>
    </changeSet>

    <changeSet id="0.12-180" author="Ali Sedaghat">
        <sql>alter table fak_maturity_level rename constraint baseinfo_maturitylevel_pkey to pk_fak_maturity_level;</sql>
    </changeSet>

    <changeSet id="0.12-181" author="Ali Sedaghat">
        <sql>alter table fak_maturity_level drop constraint if exists baseinfo_maturitylevel_value_check;</sql>
    </changeSet>

    <changeSet id="0.12-182" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_maturity_level"/>
    </changeSet>

    <changeSet id="0.12-183" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_maturity_level"
                              constraintName="baseinfo_maturitylevel_title_profile_id_2682c3b0_uniq"/>
    </changeSet>

    <changeSet id="0.12-184" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_maturity_level"
                              constraintName="baseinfo_maturitylevel_value_profile_id_ddb3a964_uniq"/>
    </changeSet>

    <changeSet id="0.12-185" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_maturity_level" constraintName="uq_baseinfo_maturitylevel_code_kit_id"/>
    </changeSet>

    <changeSet id="0.12-186" author="Ali Sedaghat">
        <renameColumn tableName="fak_maturity_level" oldColumnName="assessment_kit_id" newColumnName="kit_id"/>
    </changeSet>

    <changeSet id="0.12-187" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_maturity_level"
                                 baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_maturitylevel_assessmentkit"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-188" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_maturity_level" columnNames="title,kit_id"
                             constraintName="fak_maturitylevel_title_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-189" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_maturity_level" columnNames="index,kit_id"
                             constraintName="fak_maturitylevel_index_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-190" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_maturity_level" columnNames="code,kit_id"
                             constraintName="fak_maturitylevel_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-191" author="Ali Sedaghat">
        <addColumn tableName="fak_maturity_level">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-192" author="Ali Sedaghat">
        <addColumn tableName="fak_maturity_level">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-193" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_maturity_level"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_maturitylevel_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-194" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_maturity_level"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_maturitylevel_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-195" author="Ali Sedaghat">
        <update tableName="fak_maturity_level">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
             WHERE fak_maturity_level.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-196" author="Ali Sedaghat">
        <update tableName="fak_maturity_level">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_maturity_level.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-197" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_maturity_level" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-198" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_maturity_level" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-199" author="Ali Sedaghat">
        <addColumn tableName="fak_maturity_level">
            <column name="creation_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-200" author="Ali Sedaghat">
        <addColumn tableName="fak_maturity_level">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-201" author="Ali Sedaghat">
        <update tableName="fak_maturity_level">
            <column name="creation_time" valueComputed="fak_assessment_kit.creation_time FROM fak_assessment_kit
             WHERE fak_maturity_level.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-202" author="Ali Sedaghat">
        <update tableName="fak_maturity_level">
            <column name="last_modification_time" valueComputed="fak_assessment_kit.last_modification_date FROM fak_assessment_kit
             WHERE fak_maturity_level.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-203" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_maturity_level" columnName="creation_time"/>
    </changeSet>

    <changeSet id="0.12-204" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_maturity_level" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-205" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_maturitylevel_id_seq" newSequenceName="fak_maturity_level_id_seq"/>
    </changeSet>

    <changeSet id="0.12-206" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_maturity_level" columnNames="value,kit_id"
                             constraintName="uq_fak_maturitylevel_value_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-207" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_levelcompetence" newTableName="fak_level_competence"/>
    </changeSet>

    <changeSet id="0.12-208" author="Ali Sedaghat">
        <sql>alter table fak_level_competence rename constraint baseinfo_levelcompetence_pkey to pk_fak_level_competence;</sql>
    </changeSet>

    <changeSet id="0.12-209" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_level_competence"/>
    </changeSet>

    <changeSet id="0.12-210" author="Ali Sedaghat">
        <renameColumn tableName="fak_level_competence" oldColumnName="maturity_level_id"
                      newColumnName="affected_level_id"/>
    </changeSet>

    <changeSet id="0.12-211" author="Ali Sedaghat">
        <renameColumn tableName="fak_level_competence" oldColumnName="maturity_level_competence_id"
                      newColumnName="effective_level_id"/>
    </changeSet>

    <changeSet id="0.12-212" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_level_competence"
                                 baseColumnNames="affected_level_id"
                                 referencedTableName="fak_maturity_level"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_levelcompetence_maturitylevel_affectedlevelid"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-213" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_level_competence"
                                 baseColumnNames="effective_level_id"
                                 referencedTableName="fak_maturity_level"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_levelcompetence_maturitylevel_effectivelevelid"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-214" author="Ali Sedaghat">
        <sql>alter table fak_level_competence drop constraint if exists baseinfo_levelcompetence_value_check;</sql>
    </changeSet>

    <changeSet id="0.12-215" author="Ali Sedaghat">
        <addColumn tableName="fak_level_competence">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-216" author="Ali Sedaghat">
        <addColumn tableName="fak_level_competence">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-217" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_level_competence"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_levelcompetence_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-218" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_level_competence"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_levelcompetence_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-219" author="Ali Sedaghat">
        <update tableName="fak_level_competence">
            <column name="created_by" valueComputed="fak_maturity_level.created_by FROM fak_maturity_level
             WHERE fak_level_competence.affected_level_id = fak_maturity_level.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-220" author="Ali Sedaghat">
        <update tableName="fak_level_competence">
            <column name="last_modified_by" valueComputed="fak_maturity_level.last_modified_by FROM fak_maturity_level
             WHERE fak_level_competence.affected_level_id = fak_maturity_level.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-221" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_level_competence" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-222" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_level_competence" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-223" author="Ali Sedaghat">
        <addColumn tableName="fak_level_competence">
            <column name="creation_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-224" author="Ali Sedaghat">
        <addColumn tableName="fak_level_competence">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-225" author="Ali Sedaghat">
        <update tableName="fak_level_competence">
            <column name="creation_time" valueComputed="fak_maturity_level.creation_time FROM fak_maturity_level
             WHERE fak_level_competence.affected_level_id = fak_maturity_level.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-226" author="Ali Sedaghat">
        <update tableName="fak_level_competence">
            <column name="last_modification_time" valueComputed="fak_maturity_level.last_modification_time FROM fak_maturity_level
             WHERE fak_level_competence.affected_level_id = fak_maturity_level.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-227" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_level_competence" columnName="creation_time"/>
    </changeSet>

    <changeSet id="0.12-228" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_level_competence" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-229" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_levelcompetence_id_seq" newSequenceName="fak_level_competence_id_seq"/>
    </changeSet>

    <changeSet id="0.12-230" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_level_competence" columnName="value"/>
    </changeSet>

    <changeSet id="0.12-231" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_level_competence" columnName="effective_level_id"/>
    </changeSet>

    <changeSet id="0.12-232" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_assessmentsubject_questionnaires" newTableName="fak_subject_questionnaire"/>
    </changeSet>

    <changeSet id="0.12-233" author="Ali Sedaghat">
        <sql>alter table fak_subject_questionnaire
            rename constraint baseinfo_assessmentsubject_questionnaires_pkey to pk_fak_subject_questionnaire;</sql>
    </changeSet>

    <changeSet id="0.12-234" author="Ali Sedaghat">
        <renameColumn tableName="fak_subject_questionnaire" oldColumnName="assessmentsubject_id" newColumnName="subject_id"/>
    </changeSet>

    <changeSet id="0.12-235" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_subject_questionnaire"/>
    </changeSet>

    <changeSet id="0.12-236" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_subject_questionnaire"
                              constraintName="baseinfo_assessmentsubje_assessmentsubject_id_que_cc480566_uniq"/>
    </changeSet>

    <changeSet id="0.12-237" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject_questionnaire"
                                 baseColumnNames="subject_id"
                                 referencedTableName="fak_subject"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subjectquestionnaire_subject"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-238" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject_questionnaire"
                                 baseColumnNames="questionnaire_id"
                                 referencedTableName="fak_questionnaire"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subjectquestionnaire_questionnaire"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-239" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_subject_questionnaire" columnNames="subject_id,questionnaire_id"
                             constraintName="uq_fak_subjectquestionnaire_subjectid_questionnaireid"/>
    </changeSet>

    <changeSet id="0.12-240" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_assessmentsubject_questionnaires_id_seq"
                        newSequenceName="fak_subject_questionnaire_id_seq"/>
    </changeSet>


    <changeSet id="0.12-241" author="MKouhestani">
        <addColumn tableName="baseinfo_assessmentkitdsl">
            <column name="creation_time" type="${datetime_with_time_zone_type}"
                    defaultValueComputed="current_timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="json_path" type="varchar(200)" valueComputed="dsl_file"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-242" author="MKouhestani">
        <modifyDataType
                columnName="dsl_file"
                newDataType="varchar(200)"
                tableName="baseinfo_assessmentkitdsl"/>
    </changeSet>
</databaseChangeLog>
